---
import { SITE_TITLE, SITE_DESCRIPTION, EMBED_COLOUR } from "../config.js";
import { Icon } from "astro-icon";

export interface Props {
  title?: string;
  description?: string;
  embed_colour?: string;
}

const today = new Date();

const {
  title = SITE_TITLE,
  description = SITE_DESCRIPTION,
  embed_colour = EMBED_COLOUR,
} = Astro.props as Props;

const stars = fetch("https://api.github.com/repos/Eludris/elusite")
  .then((res) => res.json())
  .then((res) => res.stargazers_count);
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content="/das_ding.png" />
    <meta property="og:image:width" content="300" />
    <meta property="og:image:height" content="300" />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="." />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content="/das_ding.png" />
    <meta name="theme-color" content={embed_colour} />
  </head>
  <body>
    <nav>
      <a href="/" id="nav-logo">
        <img src="/das_ding.png" alt="eludris" />
      </a>
      <a href="/blog" class="nav-link"><span>Blog</span></a>
      <a href="https://eludris.github.io/docs" class="nav-link"><span>Docs</span></a>
      <a href="https://github.com/eludris" class="nav-link"
        ><span>GitHub</span>
      </a>
    </nav>
    <slot />
    <footer>
      <span
        >&copy; {today.getFullYear()} Eludris. All rights reserved. <span
          style="color: #777777">|</span
        > This repository has <span style="color: #bbbb22">{stars} stars</span> on
        github.</span
      >
      <div id="footer-links">
        <a href="https://github.com/eludris"
          ><Icon name="akar-icons:github-fill" color="black" />
        </a>
        <span style="color: #777777">|</span>
        <a href="https://discord.gg/vV6v2DhWQB"
          ><Icon name="logos:discord-icon" />
        </a>
        <span style="color: #777777">|</span>
        <a href="https://reddit.com/r/eludris"
          ><Icon name="logos:reddit-icon" />
        </a>
      </div>
    </footer>
    <style>
      :root {
        --font-size-base: clamp(1rem, 0.34vw + 0.91rem, 1.19rem);
        --font-size-lg: clamp(1.2rem, 0.8vw + 1.2rem, 1.5rem);
        --font-size-xl: clamp(2.44rem, 2.38vw + 1.85rem, 3.75rem);

        --color-text: hsl(12, 5%, 4%);
        --color-bg: #201530;
        --color-border: hsl(17, 24%, 90%);
      }

      html {
        font-family: system-ui, sans-serif;
        color: var(--color-text);
        background-color: var(--color-bg);
        font-size: calc(var(--font-size-base) + 1px);
      }

      body {
        margin: 0;
      }

      nav {
        display: flex;
        flex-direction: row;
        background-color: #3e374a;
        height: 2em;
        padding: 0 1em;
        align-items: stretch;
        margin-bottom: 20px;
      }

      .nav-link {
        margin: 0;
        color: black;
        width: 7em;
        text-align: center;
        line-height: 2em;
        transition: background-color ease-in-out 125ms;
        color: #ee77ff;
      }

      .nav-link:hover {
        background-color: #2e243d;
      }

      #nav-logo {
        margin-right: auto;
      }

      #nav-logo > img {
        border-radius: 10px;
        width: 1.5rem;
        height: 1.5rem;
        position: relative;
        top: 0.25rem;
        cursor: pointer;
      }

      footer {
        padding: 0.5em 0em 0.3em 0.3em;
        display: flex;
        flex-direction: row;
        justify-content: space-evenly;
        text-align: center;
        color: #eeeeee;
        background-color: #3e374a;
        align-items: center;
      }

      #footer-links {
        display: flex;
        justify-content: center;
        gap: 1em;
        flex-direction: row;
        align-items: center;
      }

      #footer-links > a > [astro-icon] {
        width: 2em;
        position: relative;
        top: 0.2em;
      }

      :global(h1) {
        font-size: var(--font-size-xl);
      }

      :global(h2) {
        font-size: var(--font-size-lg);
      }

      :global(a) {
        text-decoration: none;
        color: #ee99ff;
      }

      @media only screen and (max-width: 1200px) {
        footer {
          flex-direction: column;
        }
        #footer-links {
          order: -1;
        }
      }
    </style>
  </body>
</html>
